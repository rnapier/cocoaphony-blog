
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cocoaphony</title>
  <meta name="author" content="Rob Napier">

  
  <meta name="description" content="Manuel Chakravarty made a comment a few weeks ago: By not using standard FP terminology in emerging languages like Swift, we deny learners access to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://localhost:4000/page3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Cocoaphony" type="application/atom+xml">
  <link href="https://micro.blog/cocoaphony" rel="me" />
  <link href="https://twitter.com/cocoaphony" rel="me" />
  <link href="https://github.com/robnapier" rel="me" />
  <!-- <script src="/javascripts/modernizr-2.0.js"></script> -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <!-- <script src="/javascripts/octopress.js" type="text/javascript"></script> -->
  <script src='/javascripts/footnotes.js' type="text/javascript"></script>

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Cocoaphony</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/haskell-overlords">I, for One, Welcome Our New Haskell Overlords</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-09-29T10:57:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://twitter.com/TacticalGrace/status/506079987565613056">Manuel Chakravarty</a> made a comment a few weeks ago:</p>

<blockquote><p>By not using standard FP terminology in emerging languages like Swift, we deny learners access to a lot of existing literature.</p></blockquote>

<p>I certainly agree. But there&rsquo;s a lot more to it, and I hope the functional programming community will get involved in new ways. We&rsquo;ll get there. First, a little history for the rest of us. FP folks, I&rsquo;ll get back to you in a couple of sections.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/haskell-overlords">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/go-is-a-shop-built-jig">Go Is a Shop-built Jig</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-09-17T15:50:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://al3x.net/about.html">Alex Payne</a> wrote an excellent essay called <a href="https://al3x.net/2014/09/16/thoughts-on-five-years-of-emerging-languages.html">Thoughts on Five Years of Emerging Languages</a>. It called to mind something I wrote a while ago for a limited audience that I never got around to turning into a public form. Thanks to <a href="https://twitter.com/TacticalGrace">Manuel Chakravarty</a> for the link and the inspiration.</p>

<p>For those who read my blog for Cocoa (and recently Swift) discussion, you may be surprised that most of my professional work right now is in Go, C, and C++ (in that order). So I thought I might take a moment to discuss Go.</p>

<p>First, it&rsquo;s important to say that I really like Go. I didn&rsquo;t think I would. I&rsquo;m a language snob at heart. Before Swift, I&rsquo;d been spending a lot of time on the <a href="http://learnyouahaskell.com">functional</a> side of the <a href="http://www.scala-lang.org">street</a> with a brief dallience with <a href="http://akka.io">actors</a>. I was just about to do deeper <a href="http://clojure.org">into the parens</a>, when I wound up taking a side trip into Google-land and Go. I&rsquo;d dipped my toe into the water once before and been turned off by what seemed to be the sloppiness of the language. How variables are declared bugged me (turns out it <a href="http://gophercon.sourcegraph.com/post/83845316771/panel-discussion-with-go-team-members">bugs the lead language designer</a>, too). The multiple return types of <code>range</code>Â bugged me. <a href="http://blog.golang.org/strings">Strings switching between code points and bytes</a> bugged me. The fact that Go can&rsquo;t implement its own <code>append()</code> harkened back to funky Perl magic. Go just seemed sloppy and under-considered.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/go-is-a-shop-built-jig">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/reduction-in-force">Reduction in Force</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-09-14T20:14:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Our last <a href="/flatmap">talk about >>==</a> was full of twists and turns, some
philosophy, surprising connections, and a radical new operator. It was a lot to
absorb, and you may have to play with it some in your own code before you really
know what it&rsquo;s about. That&rsquo;s ok.</p>

<p>Let&rsquo;s take a little break and talk about a handy functional tool built into
Swift stdlib. I promise no big reveals, no new operators, no fancy types; just
hands-on, practical discussion of the Swiss Army knife of transform functions:
<code>reduce</code>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/reduction-in-force">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/flatmap">Flattenin' Your Mappenin'</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-09-07T09:13:15-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>In which our heroes create for themselves a convenience and discover a
surprising thing.</p></blockquote>

<p><a href="/maps">Last time</a> we looked at the incredible little <code>map</code> function, and saw
how it could be used to simplify a lot of tedious for-loops while making our
code more clear and less error-prone. This time, we&rsquo;re going to see if we can
solve a common problem that happens with mapping, nesting.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/flatmap">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/maps">Maps... Wait, They Don't Love You Like I Love You</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-08-28T08:20:25-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I had a bit of a throw-away line in
<a href="/functional-wish-fulfillment">Functional Wish Fulfillment</a>:</p>

<blockquote><p>Kind of like map, but kind of different.</p></blockquote>

<p>And I tossed a call to <code>map</code>, unexplained, in the middle of the parsing code. I
got a little ahead of myself there. Sorry about that. Cocoa has no <code>map</code>. Maybe
not everyone coming to Swift has a long history with this amazing little
function. In a field where monads get all the press, it&rsquo;s time to step back and
talk about the humble map.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/maps">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/functional-wish-fulfillment">Functional Wish Fulfillment</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-08-18T22:00:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yes, this is another of those &ldquo;how to parse JSON in Swift&rdquo; blog posts that seem
to be required of every Swift blogger. And yes, several of the techniques we&rsquo;ll
work through come from the functional programming world. And, <em>yes</em>,
Swift+Functional+JSON is itself a well-worn trail. But still, I hope you find
this exploration helpful. Don&rsquo;t think of it as functional programming. Think of
it as the path of &ldquo;I wish there were a function that&hellip;.&rdquo;</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/functional-wish-fulfillment">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/llama-calculus">Your Lips Keep Moving, but All I Hear Is "Applicator Functive Monastic Llama Calculus..."</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-08-09T16:16:19-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>...and I hated calculus.</p>

<p>Yes, the functional world seems to overflow with bizarre terms that defy
intuition. Faced with words like <em>object</em>, <em>property</em>, <em>inherit</em>, <em>class</em>, even
non-programmers can get some handle on what they might mean. <em>Applicative
functor</em> is not so kind. Nor is the ubiquitous <em>monad</em>, a word that feels
designed to obscure its meaning (plus the ensuing
<a href="http://www.haskell.org/pipermail/haskell-cafe/2009-January/053317.html">arguments over whether something is really a monad or a monoid</a>).</p>

<p>Let me boil functional programming down to its basics, the part you need before
we can really get started: variables are evil. Stop mutating them. It just makes
them more evil. If I could do just one thing to improve your Swift programs, it
would be to generate an electric keyboard shock every time you typed <code>v</code> <code>a</code>
<code>r</code>. Yeah, you&rsquo;ll need it sometimes, but each time you should ask &ldquo;is it worth
the shock?&rdquo; And by &ldquo;the shock,&rdquo; I mean &ldquo;hard to find bugs.&rdquo;<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/llama-calculus">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/should-i-swift">But Should I...Swift?</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-07-28T18:13:50-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In response to <a href="http://robnapier.net/i-dont-know-swift">I Don&rsquo;t Know Swift</a>:</p>

<blockquote><p>Is this career advice? I am a web developer thinking about a &ldquo;career change&rdquo;
to iOS. Since I have no background in CocoaTouch or anything Apple, would your
advice be the same, to learn Swift?</p></blockquote>

<p>I&rsquo;ve received different versions of this question since the day after Swift was
released, from ObjC lovers and haters, seasoned pros and the uninitiated. Having
had a very unusual (and privileged) career path, I&rsquo;m probably not qualified to
give career advice, but I&rsquo;ve been asked enough that maybe it&rsquo;s worth talking
about. Maybe I can frame how to think about it, even if I can&rsquo;t give you
satisfying certainty. Maybe that&rsquo;s all advice really is.</p>

<p> </div>
  
  
    <footer>
      <a rel="full-article" href="/should-i-swift">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/i-dont-know-swift">I Don't Know Swift</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-07-18T11:04:22-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I know a thing or two about Objective-C. It&rsquo;s not bragging. If you&rsquo;re reading my
blog, there&rsquo;s a decent chance that I know more about Objective-C than you do. I
have opinions about it. You should take them seriously even if you disagree.
They&rsquo;re founded on shipping a lot of code. I&rsquo;ve shipped Cocoa software solo and
in big teams, OS X and iOS, year-long release cycles and 30 hours to build a
demo for Steve Jobs. I&rsquo;ve been writing ObjC since 10.4 was the new hotness,
before ARC, before properties, before Intel. There are many developers with much
more experience, but even so, I know a thing or two about Objective-C.</p>

<p>I have no idea how to write Swift.</p>

<p>Neither does anyone else.</p>

<p>Not even Apple.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/i-dont-know-swift">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/code-is-technical-writing-plus-a-compiler">Code Is Technical Writing (Plus a Compiler)</a></h1>
    
    
      <p class="meta">
        









<time datetime="2014-06-16T16:19:14-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Good coding practices are those that make it easier to&hellip;</p>

<ol>
<li>write correct code (i.e. discourage behaviors that are likely to create new bugs)</li>
<li>detect incorrect code (i.e. make it easier to code review and debug)</li>
<li>understand and modify code, while maintaining its correctness</li>
<li>reuse code in other projects while still keeping these properties</li>
</ol>


<p>I consider other concerns secondary. For example, I believe it&rsquo;s much more
important that it be easy to write correct code than it be easy to write fast
code.</p>

<p>So what about &ldquo;shortness&rdquo; of code? It&rsquo;s the same as in other kinds of
technical writing (and source code is a kind of techincal writing, with an
audience of both programmers and compilers). It should be concise and to the
point, but the first concern is not the number of letters the author must
write. Good code should be the same. Extraneous details, obvious to the
reader, should eliminated. But important details should not be omitted. And as
in technical writing, assume that the reader may have jumped into this section
without reading everything that came before. Yes, that means you occassionally
repeat yourself. That is not a sin in writing or in code.</p>

<p>Write with an eye to how it will be read. Since much code review is done with
contextual diffs, your code should be understandable with limited context and
without an IDE. Most importantly, incorrect code should be easy to spot with
limited context. This is best done by making suspicious things look
suspicious.</p>

<p>Prior to ARC, the single most common cause of crashes in ObjC was directly
accessing ivars rather than going through accessors. I saw this again and
again in various product teams, with students, and on StackOverflow. It is
just too easy to mess up retains and releases if you do them all by hand. But
ObjC memory management is quite simple if you always use accessors. So when a
program was crashing, the first place I always looked was for direct ivar
accesses. But how do you find them? If I see <code>foo = bar</code>, is it a bug? If
<code>foo</code> is a local variable it&rsquo;s probably correct. If it&rsquo;s an ivar, I need to
dig in. How do I know?</p>

<p>Over the years, ObjC developers learned to put an underscore on the front of
ivars (eventually, Apple even made this automatic). Then <code>_foo = bar</code> is
suspicious. Why are you messing with an ivar directly? You have a much better
chance of finding the bug. That underscore (and using <code>self</code>) meant a few more
letters to read and write, but it saved us many bugs by making the code much
more clear and making suspicious things look suspicious. That&rsquo;s what good
practice looks like.</p>

<p>But it worked the other way too. It&rsquo;s somewhat common in ObjC for accessors to
have side effects. Sometimes they post notifications, or put things on a
dispatch queue, or fire a KVO. And this can be a source of bugs as well. I&rsquo;ve
encountered several cases wher accessors lead to reentrance bugs because a
notification fired and was posted to another thread. In those cases, it&rsquo;s very
useful that ObjC requires <code>self</code> on accessors. When you&rsquo;re reading through the
code, <code>_foo = bar</code> may be suspicious for memory management, but you know
nothing else is happening. When you see <code>[self setFoo:bar]</code> in the middle of
code that seems to be deadlocking, that&rsquo;s a very good place to go looking for
side effects.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> Again, suspicious code looks suspicious, whether
it&rsquo;s because it calls a function it shouldn&rsquo;t or because it doesn&rsquo;t call a
function it should.</p>

<p>Code sometimes is more like fiction. Imagine you are writing a book together
with other authors. You&rsquo;re all writing your own chapters, but the plot and
characters need to stay consistent. It&rsquo;s quite a challenge. It&rsquo;s easier if
the characters have very very simple backstories, simple motivations, and
follow a simple patterns. It&rsquo;s easier to write for Murder She Wrote</p>

<p>Swift opens new doors for conciseness, but also for obfuscation. Some advice
from the C++ world: think long and hard before you overload an operator. Will
the overload make it easier or harder for a reviewer to know what your code is
doing? Like acronyms, sometimes the shorter form is much easier to understand,
especially if used very often and replacing something very long (like &ldquo;dynamic
host configuration protocol&rdquo; versus &ldquo;DHCP&rdquo;). But sometimes it becomes a
confusing soup of symbols. Make your decision based on clarity to the reader,
not efficiency of keystrokes.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>This is a major reason that dot notation frustrates older ObjC developers, even those who use it. It obscures the fact that there&rsquo;s a function call, which leads to a lot of confusion when there are side effects. We&rsquo;ve gotten used to it over the years, but you used to be able to search your code for <code>setFoo:</code> and find all the setters. It&rsquo;s harder now, and more confusing that it used to be.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page4">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/page2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - <a href="mailto:rob@neverwood.org">Rob Napier</a> - <a href="https://twitter.com/cocoaphony">@cocoaphony</a> - 
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  








<!-- Fathom - simple website analytics - https://usefathom.com -->
<script>
(function(f, a, t, h, o, m){
a[h]=a[h]||function(){
    (a[h].q=a[h].q||[]).push(arguments)
};
o=f.createElement('script'),
m=f.getElementsByTagName('script')[0];
o.async=1; o.src=t; o.id='fathom-script';
m.parentNode.insertBefore(o,m)
})(document, window, '//cdn.usefathom.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'MSRAZWIU');
fathom('trackPageview');
</script>
<!-- / Fathom -->



</body>
</html>
