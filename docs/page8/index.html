
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cocoaphony</title>
  <meta name="author" content="Rob Napier">

  
  <meta name="description" content="Last year, I presented an approach to wrapping C++. Since then, I’ve been introduced to other approaches, particularly from gf who helped me better &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://robnapier.net/page8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Cocoaphony" type="application/atom+xml">
  <link href="https://micro.blog/cocoaphony" rel="me" />
  <link href="https://twitter.com/cocoaphony" rel="me" />
  <!-- <script src="/javascripts/modernizr-2.0.js"></script> -->
  <!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
  <!-- <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script> -->
  <!-- <script src="/javascripts/octopress.js" type="text/javascript"></script> -->
  
</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Cocoaphony</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/wrapping-c-take-2-1">Wrapping C++ - Take 2, Part 1</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-06-09T02:39:04-04:00" pubdate data-updated="true">09 Jun 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last year, I presented <a href="/wrapping-c-objc">an approach to wrapping C++</a>. Since then, I’ve been introduced to other approaches, particularly from gf who helped me better understand opaque objects. Since I do a lot of cross-language work, I’ve had some opportunity to play with and expand this, and so I’d like to update my C++ wrapping approach.</p>

<p>First, to remind everyone of the problem: you have a C++ object that you want to consume in Objective-C. That’s easy in ObjC++, but if you make an ivar that references a C++ class, then the header file can only be included by ObjC++ classes. This quickly spreads .mm files throughout your project, creating all kinds of headaches. ObjC is a beautiful thing, and C++ is fine, but ObjC++ is a crazy land that should be carefully segregated from civilized code. So how do we do it?</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/wrapping-c-take-2-1">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/chinese-study">Chinese Study</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-04-28T11:00:57-04:00" pubdate data-updated="true">28 Apr 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Over the years I’ve travelled to China several times, and now I’m working with large group of developers in Suzhou, Hangzhou and Hefei. A few weeks ago I was able to visit again, and that’s gotten me back in the mood to study Chinese. It often helps me to write down things as I learn them, and some of my Chinese coworkers read this blog and might help set me straight as I wander through their language like a bull in a China shop (as it were….) It’s a bit off the trail for Cocoa development, so feel free to use the Subscribe2 link on the right to take this category off of your email subscription.</div>
  
  
    <footer>
      <a rel="full-article" href="/chinese-study">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/nslog-aint-printf-wformat">NSLog Ain't Printf in -Wformat</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-04-13T11:45:15-04:00" pubdate data-updated="true">13 Apr 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So say you had this code:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>printf("%s", 1);
NSLog(@"%s", 1);
</code></pre></div></div>

<p>And you compiled with <code class="highlighter-rouge">-Wformat</code>. You might expect both of these lines to kick out a warning:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Format '%s' expects type 'char *', but argument 2 has type 'int'
</code></pre></div></div>

<p>You’d be particularly misled when you went and looked at the definition of <code class="highlighter-rouge">NSLog()</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FOUNDATION_EXPORT void NSLog(NSString *format, ...) __attribute__((format(__NSString__, 1, 2)));
</code></pre></div></div>

<p>Why look there, doesn’t that look like it should provide format type checking? Oh how foolish. Neither gcc nor clang can actually handle that <code class="highlighter-rouge">__NSString__</code> specifier in a robust way. So the first line above will give a useful warning, but the second one will silently compile and later crash. Exciting, I know. You have been warned.</p>

<p><code class="highlighter-rouge">-Wformat-nonliteral</code> and <code class="highlighter-rouge">-Wformat-security</code> do catch dangerous calls like <code class="highlighter-rouge">NSLog(foo)</code>, so <code class="highlighter-rouge">__NSString__</code> isn’t a complete loss, but it’s a shame we can’t get type checking here.</p>

<p>There’s a good discussion of this at <a href="http://stackoverflow.com/questions/1229212/nslog-improper-format-specifier-affects-other-variables]">NSLog(…) improper format specifier affects other variables?</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/iphone-career">iPhone as a Career</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-04-11T17:22:52-04:00" pubdate data-updated="true">11 Apr 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Prashant P. wrote me recently asking some questions that I thought I’d answer here. First, can iPhone development be full time job, and second, will it help him get into a “mainstream job” in Java, .NET, etc. As he notes, most of the iPhone development he’s seen has been a part-time rather than full-time job; a side-line rather than a career.</div>
  
  
    <footer>
      <a rel="full-article" href="/iphone-career">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/learning-cocoa-2">Learning Cocoa With Other Backgrounds</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-01-28T14:05:18-05:00" pubdate data-updated="true">28 Jan 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em><a href="http://stackoverflow.com/questions/1043820/what-programming-skills-i-need-to-become-an-iphone-developer/1044525#1044525">From a StackOverflow posting</a>.</em></p>

<p>When I teach Cocoa, I always ask the class what their background is in. This generally tells me what they need to unlearn before they’re ready for Cocoa. Here are some of the things I’ve found that different groups need to unlearn.</div>
  
  
    <footer>
      <a rel="full-article" href="/learning-cocoa-2">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-become-security-domain-expert">How to Become a Security Domain Expert?</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-01-08T14:38:45-05:00" pubdate data-updated="true">08 Jan 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>From a posting on <a href="http://stackoverflow.com/questions/1514102/how-to-become-a-security-domain-expert/1514199#1514199">StackOverflow</a>.</em></p>

<p>There are many areas of security expertise, so it highly depends on what your want your career path to look like. At the bits-and-bytes end there is penetration testing and “security research” (which is often as much “cataloging of programming bugs” as actual research). At the more strategic end there is “risk management” which often spends much of its time in non-technical considerations like appropriate budgets, education and response.</p>

<p>Blah, blah, blah, but how do you get started, right?</div>
  
  
    <footer>
      <a rel="full-article" href="/how-become-security-domain-expert">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/gotoandplay">gotoAndPlay</a></h1>
    
    
      <p class="meta">
        








<time datetime="2010-01-08T10:45:43-05:00" pubdate data-updated="true">08 Jan 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Now that we’re past the New Year, and I have a chance to reorganize my schedule, I’m working up my next series of postings. While you’re all patiently waiting, go read <a href="http://gotoandplay.freeblog.hu">gotoAndPlay</a>. I started out helping Geri on some <a href="http://stackoverflow.com/questions/2016394/set-opacity-of-a-cglayer-before-draw">layer</a> drawing <a href="http://stackoverflow.com/questions/2024376/drawing-a-cglayer-outside-the-method-drawrect-faster/2024421">questions</a> on StackOverflow, and have really gotten interested in his efforts to make his apps really beautiful.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/recent-pandora-update">The Recent Pandora Update</a></h1>
    
    
      <p class="meta">
        








<time datetime="2009-12-25T17:24:06-05:00" pubdate data-updated="true">25 Dec 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>PandoraBoy’s user interface is pretty screwed up since the recent Pandora update. I’ve talked with Pandora and it’s a known problem with WebKit. You’ll see the same issues if you run Safari. Pandora is working on a fix, and when they deploy it, PandoraBoy should automatically work again.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/pandoraboy-08">PandoraBoy 0.8</a></h1>
    
    
      <p class="meta">
        








<time datetime="2009-09-28T22:26:34-04:00" pubdate data-updated="true">28 Sep 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’ve put out <a href="http://code.google.com/p/pandoraboy/">PB 0.8</a>. It has a small number of preference and hotkey fixes, upgrades to the latest ShortcutRecorder (which took a lot more work than I hoped, and I still think may be a little flakey), dropped 10.4 support (because of the latest ShortcutRecorder), and adds experimental <a href="http://rowmote.com/Rowmote/Rowmote.html">Rowmote</a> support. (I may accidentally list “rowmote” as “rowmate” in the changelog; sorry about that.) I say “experimental” because I haven’t gotten around to testing it myself. The author of Rowmote kindly provided me a patch, and I’ve applied it and nothing seems to have blown up.</p>

<p>I’m planning at least another day of PB work this week, so vote on the Issues list for things you most care about and I’ll hit those first. Testing 10.6 support is obviously top of the charts. My main production box is still 10.5, and that’s where I run PB, so I haven’t actually run into the problem yet. But I have 10.6 boxes around to test with.</p>

<p>I know there are a lot of significant bumps with PB these days. I focus almost all of my development time on my full time Mac and iPhone projects, and only look at PB now and then (since it does everything I really want it to). But later this week I’ll make some more time to take care of the bigger issues that impact folks the most. Pandora is still my favorite music service, and I spend a lot of time listening to it. I like to help others enjoy it as much as I do.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/gcd-iphone-long-batter">GCD + iPhone</a></h1>
    
    
      <p class="meta">
        








<time datetime="2009-09-14T09:14:51-04:00" pubdate data-updated="true">14 Sep 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blogs.yankeegroup.com/2009/08/26/the-long-lasting-power-of-snow-leopard/">The long-lasting power of Snow Leopard</a> from The Yankee Group.</p>

<p>Ever since I first saw GCD at WWDC, I’ve been amazed by it and eager to give it a real spin. But since the vast majority of my work is in low-level libraries that run on both Mac and iPhone, GCD is closed to me (as is garbage collection; more on that later). I’ve said that multi-core would come to mobile devices because everything will come to mobile devices (laptops are the new desktops, and mobile is the new laptop). And for the iPhone, multi-core also makes a lot of sense by allowing Apple to dedicate a core to its own use during important functions like phone calls. But Carl Howe makes an even more compelling argument for mobile multi-core: better battery life.</p>

<p>With multi-core comes another strong possibility: garbage collection. The availability of a second core makes this more likely on iPhone. Yes, memory is tighter, but ever-growing. And GC will likely do a better job of reclaiming memory faster than much of the leaky programs I see from novice programmers. But to do it well, I think a second core is a real must. I’ve grown good at memory management over the years, and it’s hard for me to write GC Cocoa because it “feels wrong.” But I think I could get used to it…. And it would help alleviate the biggest class of coding error I see in Cocoa programs.</p>

<p>Of course, the clang static analyzer will probably help get rid of 90% of those errors anyway, so maybe the need for GC just went way down…. Have I mentioned recently how incredible clang really is? I desperately long for them to finish bringing it to Obj-C++ so I can use it.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page9">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/page7">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2019 - <a href="mailto:rob@neverwood.org">Rob Napier</a> - <a href="https://twitter.com/cocoaphony">@cocoaphony</a> - 
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  









<!-- Fathom - simple website analytics - https://usefathom.com -->
<script>
(function(f, a, t, h, o, m){
a[h]=a[h]||function(){
    (a[h].q=a[h].q||[]).push(arguments)
};
o=f.createElement('script'),
m=f.getElementsByTagName('script')[0];
o.async=1; o.src=t; o.id='fathom-script';
m.parentNode.insertBefore(o,m)
})(document, window, '//cdn.usefathom.com/tracker.js', 'fathom');
fathom('set', 'siteId', 'MSRAZWIU');
fathom('trackPageview');
</script>
<!-- / Fathom -->




</body>
</html>
