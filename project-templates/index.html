
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Building the Build System - Part 2 - Project Templates - Cocoaphony</title>
  <meta name="author" content="Rob Napier">

  
  <meta name="description" content="In Part 1 of our series, you learned how to use basic xcconfig files to manage build configuration in Xcode rather than using the Build Panel. This &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://robnapier.net/project-templates">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Cocoaphony" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8553355-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Cocoaphony</a></h1>
  
    <h2>Mac and iPhone, on the brain</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:robnapier.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Building the Build System - Part 2 - Project Templates</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-20T18:00:42-04:00" pubdate data-updated="true">May 20<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In <a href="/blog/build-system-1-build-panel">Part 1</a> of our series, you learned how to use basic xcconfig files to manage build configuration in Xcode rather than using the Build Panel. This is useful, but a bit tedious to set up every time you make a new project. What we need is a way to automatically create new projects that have our setup in place already. Wouldn&rsquo;t it be nice if you could create new Project Templates just like the ones that come with Xcode? You can, and since the release of the iPhone version of Xcode, it&rsquo;s easier than ever. Let&rsquo;s make one.</p>

<!-- more -->


<p><code>/Developer/Library/Xcode</code> &ndash; Mac
<code>/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode</code> &ndash; iPhone</p>

<p>As with much of the move in Xcode to <code>/Developer/Platforms</code>, the existing Mac files have been inconsistently transfered, and some are still found in <code>/Developer/Library</code>. Hopefully Apple will get more consistent around this over time.</p>

<p>In these directories, you&rsquo;ll see several templates that should look familiar under File Templates, Project Templates and Target Templates. Let&rsquo;s take a look at the iPhone &ndash; Application &ndash; Window-Based Application template. You should see the following structure:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>___PROJECTNAME___.xcodeproj
</span><span class='line'>___PROJECTNAMEASIDENTIFIER____Prefix.pch
</span><span class='line'>Classes/
</span><span class='line'>  ___PROJECTNAMEASIDENTIFIER___AppDelegate.h
</span><span class='line'>  ___PROJECTNAMEASIDENTIFIER___AppDelegate.m
</span><span class='line'>Info.plist
</span><span class='line'>main.m
</span><span class='line'>MainWindow.xib</span></code></pre></td></tr></table></div></figure>


<p>Basically, it looks very similar to an empty project called <code>___PROJECTNAME___</code> because that&rsquo;s what it is. You could open this project in Xcode, build it and run it. Be a little mindful of doing this; it will create a <code>build</code> directory that you&rsquo;ll want to delete later, but this is basically how we&rsquo;re going to modify our templates.</p>

<p>The one thing special about the template is a little bit of meta-data stored inside the xcodeproj. Open this in Finder (Ctrl-Click and select Show Package Contents). You&rsquo;ll see the standard project.pbxproj, but you&rsquo;ll also see TemplateIcon.icns and TemplateInfo.plist. The first is the icon shown in Xcode, and the latter includes the description of the project (again for the Xcode template chooser screen).</p>

<p>You&rsquo;ll note the use of <code>___PROJECTNAME___</code> versus <code>___PROJECTNAMEASIDENTIFIER___</code>. For the majority of projects these are the same. But if your project has characters that would be illegal in an Objective-C identifier but legal in a file name (spaces, numbers, symbols), then those will be removed in the identifier version. This is important in making class names for instance. So if your project name is &ldquo;My Application&rdquo;, the xcodeproj will be &ldquo;My Application.xcodeproj&rdquo;, but the AppDelegate class header will be &ldquo;MyApplication_AppDelegate.h&rdquo;.</p>

<p>These macros (<code>___PROJECTNAME___</code> and <code>___PROJECTNAMEASIDENTIFIER___</code>) will be substituted anywhere they are found in a filename or within the files. That includes inside of XIB files. So in the MainMenu.xib for a Cocoa project, you can fix the main menu to read &ldquo;About <strong><em>PROJECTNAME</em></strong>&rdquo; and it&rsquo;ll be substituted for you. With NIBs, you couldn&rsquo;t do this, which is why &ldquo;NewApplication&rdquo; is found all over the place in the Mac MainMenu.xib. It&rsquo;s unfortunate that Apple didn&rsquo;t fix this when they converted the Cocoa templates to XIBs.</p>

<p>There are several other macros available in project templates. These are not documented as far as I know. I&rsquo;ve worked them out by looking at the strings in the Xcode framework that provides them, and then testing which ones actually work in project templates (file templates and target templates have slightly different ones).</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>___UUIDASIDENTIFIER___
</span><span class='line'>___UUID___
</span><span class='line'>___YEAR___
</span><span class='line'>___ORGANIZATIONNAME___
</span><span class='line'>___FULLUSERNAME___
</span><span class='line'>___USERNAME___
</span><span class='line'>___TIME___
</span><span class='line'>___DATE___
</span><span class='line'>___PROJECTNAMEASXML___
</span><span class='line'>___PROJECTNAMEASIDENTIFIER___
</span><span class='line'>___PROJECTNAME___</span></code></pre></td></tr></table></div></figure>


<p>Note that while there are <code>DATE</code> and <code>YEAR</code> macros, there are no <code>DAY</code> or <code>MONTH</code> macros. <code>ORGANIZATIONNAME</code> is set by default to <code>__MyCompanyName__</code>. You can fix this by setting it in defaults:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>defaults write com.apple.Xcode PBXCustomTemplateMacroDefinitions <span class="s1">&#39;{ORGANIZATIONNAME = &quot;My Company&quot;; }&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Walking through it all</h3>

<p>Now that we&rsquo;ve talked it to death, let&rsquo;s walk through actually doing it based on our work <a href="/blog/build-system-1-build-panel">last time</a>.</p>

<ul>
<li>Open <code>~/Library/Application Support/Developer/Shared/Xcode</code> in Finder and make a directory called <code>Project Templates</code></li>
<li>Under <code>Project Templates</code>, make a directory called <code>iPhone OS</code>.</li>
<li>Open <code>/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Project Templates/Application</code> in Finder.</li>
<li>Copy (don&rsquo;t move), <code>Window-Based Application</code> from the <code>/Developer</code> window to <code>~/Library</code> window.</li>
<li>Open the <code>Window-Based Application</code> folder and open <code>___PROJECTNAME___.xcodeproj</code> in Xcode.</li>
<li>Go back to <a href="/blog/build-system-*-build-panel">&ldquo;Abandoning the Build Panel&rdquo;</a> and apply the changes there. Or apply whatever changes you want to be in every project. In your <code>Application.xcconfig</code>, you&rsquo;ll want this:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">PRODUCT_NAME</span> <span class="o">=</span> ___PROJECTNAME___
</span><span class='line'><span class="nv">GCC_PREFIX_HEADER</span> <span class="o">=</span> ___PROJECTNAMEASIDENTIFIER____Prefix.pch
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Quit Xcode</li>
<li>Delete the build/ directory if one was created</li>
<li>Right-click the xcodeproj and select &ldquo;Show Package Contents&rdquo;</li>
<li>Delete any .mode1v3 and .pbxuser files that may have been created</li>
<li>Open TemplateInfo.plist in Property Editor and set the description as you like</li>
<li>If you like, replace TemplateIcon.icns with an icon file you like</li>
<li>You can now launch XCode, select File>New Project, and you should see a &ldquo;User Templates&rdquo; section with your template.</li>
</ul>


<p>If you&rsquo;d like an example of the project template I use, along with all my xcconfig settings, I&rsquo;ve attached it. We&rsquo;ll be discussing some of these settings in the future.</p>

<p><a href="https://github.com/rnapier/cocoaphony/tree/master/Project%20Templates">Project Templates at Github</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Rob Napier</span></span>

      








  


<time datetime="2009-05-20T18:00:42-04:00" pubdate data-updated="true">May 20<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/builds/'>builds</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://robnapier.net/project-templates/" data-via="cocoaphony" data-counturl="http://robnapier.net/project-templates/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/pandoraboy-work/" title="Previous Post: PandoraBoy work">&laquo; PandoraBoy work</a>
      
      
        <a class="basic-alignment right" href="/cgeventtimestamps-are-big/" title="Next Post: CGEventTimestamps are big">CGEventTimestamps are big &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
	<h1>Coming Jan. 2014</h1>
  <a href="http://www.amazon.com/dp/1118818342"><img src="/images/ios7_ptl_cover.png" alt="iOS 7 Programing Pushing the Limits" /></a>
</section><section>
  <h1><a href="http://renaissance.io/2014">Renaissance 2014</a></h1>
    <p>I'll be discussing <a href="http://renaissance.io/2014/sessions/get_security_and_privacy_right">security best practices</a> at the Renaissance conference, January 29-31, 2014 in San Francisco.</p>
</section><section>
  <h1>About Cocoaphony</h1>
  <p>Rob is a builder of treehouses, hiker, proud father, and from time to time, a Mac and iPhone developer. Cocoaphony is where he pontificates on various issues fascinating to Cocoa developers, and occasionally other topics of technical interest.</p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - <a href="mailto:robnapier@gmail.com">Rob Napier</a> - <a href="https://twitter.com/cocoaphony">@cocoaphony</a> - 
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
